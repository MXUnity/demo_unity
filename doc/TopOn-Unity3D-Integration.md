# Unity3D Integration

[1. Introduction](#1) <br>
[2. Request account and app id](#2)<br>
[3. SDK Initialization](#3)<br>
[4. Native ads integration](#4)<br>
[5. Video ads integration](#5)<br>
[6. Interstitial ads integration](#6)<br>
[7. Banner ads integration](#7)<br>

## 1. Introduction

This document describes how to integrate the TopOn unity3d SDK from the account application to SDK integration. Following the workflow, you can integrate the TopOn SDK successfully. TopOn supports ad forms as follows in Unity 3D platform:

| Ads Form | Introduction |
| ---- | ---- |
| Native | Native Ads only provides the Ads data without UI. |
| Video | Video Ads, with UI |
| Interstitial | Interstitial Ads，with UI |
| Banner | Banner Ads，with UI |

You can choose the appropriate Ads forms of advertising according to your App's demands, the specific integration method see the following description.

<h2 id='2'>2. Request account and app id</h2>

Refer to <a href="https://app.toponad.com/document/doc-en/getstarted/get_started.html" target="_blank">Get Started</a> for Account Registration and Login Instructions

##3. SDK Initialization</h2>

### 3.1 Add TopOnSDK to your project

You can get TopOnSDK for unity3d from TopOn business, and the file description of TopOnSDK is:

**(SDK is developed on the basis of the 2018 version)**

| File Name | Description | Necessary |
| ---- | ---- | ---- |
| anythinkunity3d.unitypackage | TopOn Unity3d Plugin package, you can import this package into the unity3d project for integration | Yes |

#### 3.1.1 Android import introduction（Introduction for Path：/Assets/Plugins/Android ）

**1.libs plugin introduction**

| Path | Description | Necessary|
|----|----|----|
|./libs/aars\_anythink| Core SDK of TopOn|Yes|
|./libs/aars\_china\_network | Network SDK of China| No|
|./libs/aars/aar\_international\_network | Network SDK of Non-China| No |
|./libs/aars/aar\_v4 | Android Support v4+v7（No adding packaging if it existed in project）| Yes|

**The SDK folder in China and the SDK folder in non-China zone can only be selected for packaging（Select access based on the traffic of the developer application）**

**（1）./libs/aars\_china\_network：**

| Path | Description | Necessary|
|----|----|----|
|./aars\_china\_network/aars\_plugin| SDK Plugins of China（No adding packaging if it existed in project）|Yes|
|./aars\_china\_network/aar\_toutiao | **穿山甲**SDK| No|
|./aars\_china\_network/aar\_baidu | **百度**SDK| No |
|./aars\_china\_network/aar\_gdt | **广点通**SDK| No |
|./aars\_china\_network/aar\_ks | **快手**SDK| No |
|./aars\_china\_network/aar\_ksyun | **金山云**SDK| No |
|./aars\_china\_network/aar\_luomi | **洛米**SDK| No |
|./aars\_china\_network/aar\_mintegral_china | **Mintegral（China）**SDK| 否|
|./aars\_china\_network/aar\_oneway | **Oneway**SDK| No |
|./aars\_china\_network/aar\_sigmob | **Sigmob**SDK| No |
|./aars\_china\_network/aar\_uniplay | **玩转互联**SDK| No |

**（2）./libs/aars\_international\_network：**

| Path | Description | Necessary|
|----|----|----|
|./aars\_international\_network/aars\_plugin| SDK Plugins of Non-China（No adding packaging if it existed in project）|Yes|
|./aars\_international\_network/aars\_gms\_service | Google Service SDK（No adding packaging if it existed in project）| Yes|
|./aars\_international\_network/aar\_admob | **Admob** SDK| No|
|./aars\_international\_network/aar\_facebook | **Facebook** SDK| No|
|./aars\_international\_network/aar\_adcolony | **Adcolony** SDK| No|
|./aars\_international\_network/aar\_applovin | **Applovin** SDK| No |
|./aars\_international\_network/aar\_appnext | **Appnext** SDK| No |
|./aars\_international\_network/aar\_chartboost | **Chartboost** SDK| No |
|./aars\_international\_network/aar\_flurry | **Flurry** SDK| No |
|./aars\_international\_network/aar\_inmobi | **Inmobi** SDK| No |
|./aars\_international\_network/aar\_ironsource | **Ironsource** SDK| No |
|./aars\_international\_network/aar\_maio | **Maio** SDK| No |
|./aars\_international\_network/aar\_mintegral\_international | **Mintegral（Non-china）** SDK| No |
|./aars\_international\_network/aar\_mopub | **Mopub** SDK| No |
|./aars\_international\_network/aar\_nend | **Nend** SDK| No |
|./aars\_international\_network/aar\_startapp | **StartApp** SDK| No |
|./aars\_international\_network/aar\_superawesome | **SuperAwesome** SDK| No |
|./aars\_international\_network/aar\_tapjoy | **Tapjoy** SDK| No |
|./aars\_international\_network/aar\_unityads | **UnityAds** SDK| No |
|./aars\_international\_network/aar\_vungle | **Vungle** SDK| No |




**2.mainTemplate.gradle introduction** <br>
You must first use Unity3d to generate the mainTemplate.gradle file. As shown below：

![](img/Android_mainTemplate_pic1.png)

![](img/Android_mainTemplate_pic2.png)


Description for mainTemplate.gradle：
**(The generated sample files are provided in the SDK. Since the gradle files generated by different versions of the Unity3d tools will be different, the developer needs to delete and regenerate the gradle files under the Unity3d tool. The SDK is for reference only.)**

```java
buildscript {
    repositories {
        google()
        jcenter()
    }

    dependencies {
    	  //Different Unity3d tools may generate different version numbers.
        classpath 'com.android.tools.build:gradle:3.2.0'
**BUILD_SCRIPT_DEPS**}
}

...

android {
    compileSdkVersion **APIVERSION**
    buildToolsVersion '**BUILDTOOLS**'

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdkVersion **MINSDKVERSION**
        targetSdkVersion **TARGETSDKVERSION**
        applicationId '**APPLICATIONID**'
        ndk {
            abiFilters **ABIFILTERS**
        }
        versionCode **VERSIONCODE**
        versionName '**VERSIONNAME**'
        multiDexEnabled true //Additional settings are required to set when the number of lines of code exceeds 64k.
    }
	.....
    
}


```

**3.AndroidManifest.xml introduction**：

```java
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
package="com.superapp.filemanager"
android:versionCode="2"
android:versionName="1.1" >

<uses-sdk
android:minSdkVersion="16"
android:targetSdkVersion="28"
android:usesCleartextTraffic="true" />

<!--The configuration of usesCleartextTraffic is required. The main role is to make http requests available in the game (must be used)-->
<application
android:usesCleartextTraffic="true"
>


<activity android:name="com.unity3d.player.UnityPlayerActivity" android:label="@string/app_name">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<meta-data android:name="unityplayer.UnityActivity" android:value="true" />
</activity>

<!--This setting is mainly for adapting to machines above 9.0 (must be used)-->
<uses-library android:name="org.apache.http.legacy" android:required="false"/>
</application>



<!--Must have permission-->
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />


</manifest>

```

**4.Instructions for merging with other third-party Android SDKs** <br>
（1）The third-party jar and aar package must be placed in the following directory：/Assets/Plugins/Android/libs/<br>
（2）If the third-party sdk has resources, put the resource folder in the directory：/Assets/Plugins/Android/<br>
（3）If the third party has an AndroidManifest file, you need to merge it with the /Assets/Plugins/Android/AndroidManifest.xml file，Topon needs to retain the necessary parts of the above instructions.


**5.How to choose part of Android AAR or Jar is not packaged**

**Example for No packaging the Network of China ：**<br>

**Step 1：**Select a directory that shows the presentation files in Unity3d<br>
![](img/Android_no_package_step1.png) <br>

**Step 2：**Select all the SDK folders in China, select all the aar packages and jar packages in the next row, and then select the platform on the far right.<br>
![](img/Android_no_package_step2.png)<br>

**Step 3：**Remove the packaging options of the Android platform, and then select Apply to complete the culling package operation.
![](img/Android_no_package_step3.png)<br>





#### 3.1.2 iOS import introduction

After compiling the Xcode project with Unity, open the Xcode project, import the required SDK according to the guidelines of each third-party platform and link the system framework and lib that it depends on. You can also see the help of each platform of Topon <a href="https://app.toponad.com/document/doc-zh/ios/topon_sdk_iOS_access_guide_chinese_network.html" target="_blank">Networks SDK Access Help for Topon</a>

All third-party Framework packages are included in Unity's sdk package. Unneeded sdk packages can be deleted as needed. For details on which platforms need to be introduced, please see the help documentation above.

According to the information listed above, the SDK required for each third-party network is introduced and the system framework and lib are introduced according to the requirements of each SDK. The following configuration needs to be performed in the Build Settings:

1.In the **Build Settings** of the Xcode project, search for the **bitcode** and change its value to **NO** (the current version of Unity (2018.02) compiled Xcode project, this setting defaults to Yes), as shown in Figure:

![](img/iOS_Bitcode_Settings.png)

2.In the **Build Settings** of the Xcode project, search for **runpath search paths** and change its value to @**executable_path/Frameworks **, as shown in Figure:

![](img/iOS_Runpath_Search_Paths_Settings.png)

3.In the **Build Settings **of the Xcode project, search for **other linker flags** and add **-ObjC, -fobjc-arc** based on the default values, as shown in Figure:
![](img/iOS_Other_Linker_Flags_Settings.png)

4.In the **Build Settings** of the Xcode project, search for **C Language Dialect** and change its value to** GNU99[-std=gnu99]** , as shown in Figure:

![](img/iOS_C_Language_Dialect_Settings.png)

### 3.2 Initialize API description

| API | Parameter | Description|
| --- | --- |---|
| setChannel| string channel| Configure the channel information of the SDK. |
| initCustomMap | Dictionary<string, string> customMap| Configure custom parameters to match **customs target rules **configured in the developer portal|
| setLogDebug | bool isDebug |Open debug mode for SDK to view more logs|
| setGDPRLevel | int level |Set the GDPR privacy level for the EU. Value description: 0 (completely personalized), 1 (no device information collected, no personalization), 2 (forbidden use)|
| showGDPRAuth | None |Show the GDPR Authorization page|
| isEUTraffic | None |Determine whether the EU countries|
| initSDK |string appId, string appKey|Initialize SDK|

#### 3.2.1 SDK GDPR Description
Beginning on May 25th, 2018, the European Union’s General Data Protection Regulation (GDPR) will go into effect. To protect our developers and your users benefit and privacy, we have updated our <a href="https://www.toponad.com/privacy-policy" target = "_blank">《Topon Privacy Policy》</a>. At the same time, we have added privacy permission settings in the SDK version V2.0.0 or later. Please check the following documents and complete the SDK integration.



1,For more information about TopOn SDK's detailed of GDPR, please refer to <a href="https://app.toponad.com/document/doc-en/android/base_integration.html" target="_blank">GDPR Introduction</a>

2,Api Introduction:


```java

/***
* @param level gdrp Set privacy permissions
* 0:Normal data reading
* 1:Protect some private data
* 2:Fully confidential, can't read any data, sdk function can't run normally
*/
public static void setGDPRLevel(int level)

/***
* Display gdpr authorization page
*/
public static void showGDPRAuth()


/**
* Set gdpr settings for individual platforms
* @param networkType Platform type
* @param dictionary Data configuration
*/
public static void addNetworkGDPRInfo(int networkType, Dictionary<string,string> dictionary)


```

Call example:

android:

```java

//gdpr
Dictionary<string, object> dictionary ;


//admob
dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.ADMOB_KEY_ALLOW_GDPR, "true");//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_ADMOB,dictionary);

//inmobi
dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.INMOBI_KEY_ALLOW_GDPR, "true");// agree gdpr
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.INMOBI_KEY_ISGDPRSCOPE, "1");//Whether gdpr area 1:yes
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_INMOBI,dictionary);


dictionary = new Dictionary<string, object> ();
//iba string
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.FLURRY_KEY_GDPR_IABSTR, "");//Iba string conforms to the iba protocol
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.FLURRY_KEY_ISGDPRSCOPE, "true");//Whether gdpr area
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_FLURRY,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.APPLOVIN_KEY_ALLOW_GDPR, "true");//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_APPLOVIN,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.MINTEGRAL_KEY_ALLOW_GDPR, "1"); //agree gdpr 1yes
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_MINTEGRAL,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.MOPUB_KEY_ALLOW_GDPR, "true");
//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_MOPUB,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.CHARTBOOST_KEY_ALLOW_GDPR, "true");//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_CHARTBOOST,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.TAPJOY_KEY_ALLOW_GDPR, "1");
//agree gdpr
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.TAPJOY_KEY_ISGDPRSCOPE, "true");
//Whether gdpr area 
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_TAPJOY,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.IRONSOURCE_KEY_ALLOW_GDPR, "true");
//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_IRONSOURCE,dictionary);


dictionary = new Dictionary<string, object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.UNITYADS_KEY_ALLOW_GDPR, "true");//agree gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_UNITYADS,dictionary);


dictionary = new Dictionary<string,object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.VUNGLE_KEY_ALLOW_GDPR, "true");//argee gdpr
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_VUNGLE,dictionary);


dictionary = new Dictionary<string,object> ();
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.ADCOLONY_KEY_ALLOW_GDPR, "1");//argee gdpr 1yes
dictionary.Add (ATConst.NEWWORK_GDPR_KEY.ADCOLONY_KEY_ISGDPRSCOPE, "true");//Whether gdpr area
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_ADCOLONY,dictionary);

```

The following is a sample code of the GDPR (IOS) configuration of each platform. Please refer to the official website for the specific settings of each platform.

```java

//Admob
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_ADMOB, new Dictionary<string, object>{"consent_status":"2", "under_age":"0"});

//Inmobi
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_INMOBI, new Dictionary<string, object>{"gdpr":"0", "consent_string":"true"});

//Flurry
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_FLURRY, new Dictionary<string, object>{"scope_flag":"0", "consent_string":""});

//Applovin
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_APPLOVIN, new Dictionary<string, object>{"under_age":"0", "consent_status":"0"});

//Mintegral
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_MINTEGRAL, new Dictionary<string, object>{"0":"1"});

//Mopub
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_MOPUB, new Dictionary<string, object>{"value":"1"});

//Chartboost
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_CHARTBOOST, new Dictionary<string, object>{"value":true});

//Tapjoy
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_TAPJOY, new Dictionary<string, object>{"consent_value":"1", "gdpr_subjection":false});

//Ironsource
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_IRONSOURCE, new Dictionary<string, object>{"value":true});

//UnityAds
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_UNITYADS, new Dictionary<string, object>{"value":true});

//Vungle
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_VUNGLE, new Dictionary<string, object>{"value":1});

//AdColony
ATSDKAPI.addNetworkGDPRInfo (ATConst.NETWORK_TYPE.NETWORK_ADCOLONY, new Dictionary<string, object>{"gdpr_consideration_flag":1, "consent_string":""});

```

<h2 id='4'>4. Native ads integration</h2>

### 4.1 Integration prerequisites

(1)Make sure you have got AppID and Native Ad Placement ID via our official website.
(2)Make sure you have added the necessary files to your project
(3)Configure the AndroidManifest.xml for the user-permission、service、receiver, and obfuscate code.
(4)Complete the SDK initialization use **ATSDKAPI.initSDK** method

### 4.2 Native Ads API describe

| API | Parameter | Describe|
| --- | --- |---|
| loadNativeAd| string unitId, Dictionary<String,String> pairs|Used to load native ads, unitId is the placement id; pairs are empty|
| setLocalExtra | Dictionary<String,String> pairs | Can be used to set up local configuration of third-party platforms |
|renderAdToScene|string unitId, ATNativeAdView ATNativeAdView|Show ads for a given placementid. ATNativeAdView is the location information for the specified native ad.|
|cleanAdView|string unitId, ATNativeAdView ATNativeAdView|Remove native ads|
|hasAdReady|string unitId|Determine if the specified placementid is loaded|
|setListener|ATNativeAdListener listener|Set callback object|

**ATNativeAdListener Description**

| API | Parameter | Description|
| --- | --- |---|
|onAdLoaded| string unitId |ad load success|
|onAdLoadFail|string unitId, string code, string message |ad load failed|
|onAdClicked|string unitId|ad click|
|onAdImpressed|string unitId|ad show|
|onAdVideoStart|string unitId |Video play start，Different networks may support different|
|onAdVideoEnd|string unitId |Video play end，Different networks may support different|
|onAdVideoProgress|string unitId |video playing progress，Different networks may support different|

#### Example code:

```java
//sdk initialization
ATNativeAd.Instance.setListener(new ATNativeCallbackListener());

//Some platform personalization settings, if needed. This is an example of integrating Tencent GDT
Dictionary<string,string> gdtlocal = new Dictionary<string,string>();
gdtlocal.Add ("gdtad_width","-1");
gdtlocal.Add ("gdtad_height","-1");
ATNativeAd.Instance.setLocalExtra (currunitid,gdtlocal);

//Request Ads
ATNativeAd.Instance.loadNativeAd(currunitid, null);

//show as(setup)
int rootbasex = 100, rootbasey = 100;

//Parent frame
int x = rootbasex,y = rootbasey,width = 300*3,height = 200*3,textsize = 17;
conifg.parentProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,textcolor,textsize);

//adlogo 
x = 0*3;y = 0*3;width = 30*3;height = 20*3;textsize = 17;
conifg.adLogoProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,textcolor,textsize);


//adicon
x = 0*3;y = 50*3-50;width = 60*3;height = 50*3;textsize = 17;
conifg.appIconProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,textcolor,textsize);

//ad cta 
x = 0*3;y = 150*3;width = 300*3;height = 50*3;textsize = 17;
conifg.ctaButtonProperty = new ATNativeItemProperty(x,y,width,height,"#ff21bcab","#ffffff",textsize);

//ad desc
x = 60*3;y = 100*3;width = 240*3-20;height = 50*3-10;textsize = 10;
conifg.descProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,"#777777",textsize);


//ad image
x = 60*3;y = 0*3+20;width = 240*3-20;height = 100*3-10;textsize = 17;
conifg.mainImageProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,textcolor,textsize);

//ad title 
x = 0*3;y = 100*3;width = 60*3;height = 50*3;textsize = 12;
conifg.titleProperty = new ATNativeItemProperty(x,y,width,height,bgcolor,textcolor,textsize);


//show ads
ATNativeAdView ATNativeAdView = new ATNativeAdView(conifg);
ATManager.ATNativeAdView = ATNativeAdView;



Debug.Log("Developer renderAdToScene--->");
ATNativeAd.Instance.renderAdToScene(currunitid, ATNativeAdView);

//Clear display area
ATNativeAd.Instance.cleanAdView(currunitid,ATManager.ATNativeAdView);


bool isPaused;
void OnApplicationFocus(bool hasFocus)
{

isPaused = !hasFocus;
Debug.Log ("Developer Screen pause?"+isPaused);

ATNativeAd.Instance.onApplicationForces (currunitid,ATManager.ATNativeAdView);
}

void OnApplicationPause(bool pauseStatus)
{
isPaused = pauseStatus;
Debug.Log ("Developer Screen pause?"+isPaused);
ATNativeAd.Instance.onApplicationPasue (currunitid,ATManager.ATNativeAdView);
}

```

<h2 id='5'>5. Rewarded Video ads integration</h2>

### 5.2 Rewarded Video API describe

| API | Parameter | Description|
| --- | --- |---|
|loadVideoAd|string unitId, Dictionary<string,string> pairs| Used to load Rewarded Video ads, unitId is the placement id; pairs are empty|
|showAd|string unitId|Show Rewarded Video ads for a given placementid |
|hasAdReady|string unitId|determine if the specified placementid is loaded|
|setListener|ATRewardedVideoListener listener|Set callback object|
|setUserData|string unitId, string userId, string customData| Set the user id of the Rewarded Video|
|addsetting|string unitId, Dictionary<string,string> pairs |Can be used to set up local configuration of third-party platforms |


**ATRewardedVideoListener Description**

| API | Parameter | Description|
| --- | --- |---|
|onRewardedVideoAdLoaded|string unitId|ad load success|
|onRewardedVideoAdLoadFail|string unitId,string code, string message|ad load failed|
|onRewardedVideoAdPlayClicked|string unitId|Rewarded video Ads clicked|
|onRewardedVideoAdPlayStart|string unitId|Rewarded video Ads play start|
|onRewardedVideoAdPlayEnd|string unitId|Rewarded video Ads play end|
|onRewardedVideoAdPlayFail|string unitId,string code, string message|Rewarded video Ads play failed|
|onRewardedVideoAdPlayClosed|string unitId, bool isReward|Rewarded video Ads Closed, isReward Whether the video is finished playing|

####Example:

```java


//addsetting
//Special configuration of each platform
private Dictionary<string,object> addsetting(){
Dictionary<string,object> appsettinglist = new Dictionary<string,object> ();

//AdmobATRewardedVideoSetting
Dictionary<string,object> admobATRewardedVideoSetting = new Dictionary<string,object> ();
appsettinglist.Add(ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_ADMOB+"", Json.Serialize(admobATRewardedVideoSetting));

//mintegralATMediationSetting
Dictionary<string,object> mintegralATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_MINTEGRAL+"", Json.Serialize(mintegralATMediationSetting));

//_applovinATMediationSetting
Dictionary<string,object> _applovinATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_APPLOVIN+"", Json.Serialize(_applovinATMediationSetting));



//_flurryATMediationSetting
Dictionary<string,object> flurryATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_FLURRY+"", Json.Serialize(flurryATMediationSetting));


//_inmobiATMediationSetting
Dictionary<string,object> _inmobiATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_INMOBI+"", Json.Serialize(_inmobiATMediationSetting));


//_mopubATMediationSetting
Dictionary<string,object> _mopubATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_MOPUB+"", Json.Serialize(_mopubATMediationSetting));

//_chartboostATMediationSetting
Dictionary<string,object> _chartboostATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_CHARTBOOST+"", Json.Serialize(_chartboostATMediationSetting));

//_tapjoyATMediationSetting
Dictionary<string,object> _tapjoyATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_TAPJOY+"", Json.Serialize(_tapjoyATMediationSetting));

//_ironsourceATMediationSetting
Dictionary<string,object> _ironsourceATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_IRONSOURCE+"", Json.Serialize(_ironsourceATMediationSetting));

//_unityAdATMediationSetting
Dictionary<string,object> _unityAdATMediationSetting = new Dictionary<string,object> ();
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_UNITYADS+"", Json.Serialize(_unityAdATMediationSetting));

//vungleRewardVideoSetting
Dictionary<string,object> vungleRewardVideoSetting = new Dictionary<string,object> ();

vungleRewardVideoSetting.Add("orientation",1);/1:2 1: means automatic rotation according to device orientation 2: video ads play in the best direction
vungleRewardVideoSetting.Add("isSoundEnable",true);//true:false
vungleRewardVideoSetting.Add("isBackButtonImmediatelyEnable",false);//true:false If true, the user can immediately exit the ad using the back button. If false, the user cannot use the back button to quit the ad until the close button on the screen is displayed.
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_VUNGLE+"", Json.Serialize(vungleRewardVideoSetting));


//adColonyATRewardVideoSetting
Dictionary<string,object> adColonyATRewardVideoSetting = new Dictionary<string,object> ();

adColonyATRewardVideoSetting.Add("enableConfirmationDialog",false);//true:false
adColonyATRewardVideoSetting.Add("enableResultsDialog",false);//true:false
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_ADCOLONY+"", Json.Serialize(adColonyATRewardVideoSetting));
return appsettinglist;
}

//ttATRewardedVideoSetting
Dictionary<string,object> ttATRewardedVideoSetting = new Dictionary<string,object> ();
ttATRewardedVideoSetting.Add("requirePermission",true);//Whether to apply for permission
ttATRewardedVideoSetting.Add("orientation",1);//Optional parameters Set the direction in which you want the video to play.
ttATRewardedVideoSetting.Add("supportDeepLink",true);//Optional parameters Set whether to support deeplink
ttATRewardedVideoSetting.Add("rewardName","CION");//Optional parameters Name of the reward video reward for the excitation video parameters
ttATRewardedVideoSetting.Add("rewardCount",1);//Optional parameters Number of incentive video rewards
appsettinglist.Add (ATAds.Api.ATConst.NETWORK_TYPE.NETWORK_TOUTIAO+"", Json.Serialize(ttATRewardedVideoSetting));



//initialization
ATRewardedVideo.Instance.setListener(new ATCallbackListener());
ATRewardedVideo.Instance.addsetting (currunitid,addsetting());




//ad load 
ATRewardedVideo.Instance.loadVideoAd(currunitid,null);


//ad show
ATRewardedVideo.Instance.showAd(currunitid);

```

<h2 id='6'>6. Interstitial integration</h2>


### Interstitial API describe

| API | Parameter | Description |
| --- | --- |---|
| loadInterstitialAd|string unitId, Dictionary<string,string> pairs|Used to load Interstitial ads, unitId is the placement id; pairs are empty|
|showInterstitialAd| string unitId |show Interstitial ads for a given placementid|
|hasInterstitialAdReady| string unitId |determine if the specified placementid is loaded|
|setListener|ATInterstitialAdListener listener|Set callback object|


**ATInterstitialAdListener Description**

| API | Parameter | Description |
| --- | --- |---|
|onInterstitialAdLoad|string unitId|ads load success|
|onInterstitialAdLoadFail|string unitId, string code, string message|ads load success|
|onInterstitialAdClick|string unitId|Interstitial Ads clicked|
|onInterstitialAdShow|string unitId|Interstitial Ads showed|
|onInterstitialAdClose|string unitId|Interstitial Ads closed|
|onInterstitialAdStartPlayingVideo|string unitId|video play start, Different networks may support different|
|onInterstitialAdEndPlayingVideo|string unitId|video play ended, Different networks may support different|
|onInterstitialAdFailedToPlayVideo|string unitId, string code, string message|video play failed|

####Example:

```java

//sdk initialization
ATInterstitialAd.Instance.setListener(new ATInterstitialAdListener());




//Request Ads 
ATInterstitialAd.Instance.loadInterstitialAd(mPlacementId_interstitial_all, null);


//show as
ATInterstitialAd.Instance.showInterstitialAd(mPlacementId_interstitial_all);


```


<h2 id='7'>7. Banner integration</h2>

### Banner API describe

| API | Parameter | Description |
| --- | --- |---|
| loadBannerAd|string unitId, Dictionary<string,string> pairs|Used to load Banner ads, unitId is the placement id; pairs are empty|
|showBannerAd|string unitId, ATRect rect|A banner ad showing the specified placementid. The parameters are the x coordinate, y coordinate, w width, and h height of the specified banner|
|showBannerAd|string unitId|show the hided Banner|
|cleanBannerAd|string unitId|clean ads|
|hideBannerAd|string unitId|hide Banner|
|setListener|ATBannerAdListener listener|Set callback object|

**ATBannerAdListener Description**

| API | Parameter | Description |
| --- | --- |---|
|onAdLoad|string unitId|ad load success|
|onAdLoadFail|string unitId, string code, string message|ad load failed|
|onAdClick|string unitId|ad click|
|onAdImpress|string unitId|ad show|
|onAdClose|string unitId|ad close|
|onAdAutoRefresh|string unitId|Banner auto refresh|
|onAdAutoRefreshFail|string unitId, string code, string message|Banner auto refresh failed|


#### Example code:

```java

//initialization
ATBannerAd.Instance.setListener(new ATBannerAdListener());



//Request Ads 
ATBannerAd.Instance.loadBannerAd(mPlacementId_native_all, null);


//show as
ATBannerAd.Instance.showBannerAd(mPlacementId_native_all, arpuRect);


```

